<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª—Ü–∏{% endblock %}</title>

    <!-- üß© Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- üé® Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <!-- üåì Light/Dark mode init -->
    <script>
      const savedMode = localStorage.getItem('mode') || 'light';
      document.documentElement.classList.add(savedMode + '-mode');
    </script>
</head>
<body class="min-vh-100 d-flex flex-column">

    <!-- üîù Navigacija -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary border-bottom px-3">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="{{ url_for('main.index') }}">–ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª—Ü–∏</a>
            <div class="d-flex align-items-center ms-auto">
                <label for="modeToggle" id="modeLabel" class="form-label me-2 mb-0 small text-secondary">üåû –°–≤–µ—Ç–ª–∏ —Ä–µ–∂–∏–º</label>
                <input type="checkbox" id="modeToggle" class="form-check-input">
            </div>
        </div>
    </nav>

    <!-- üì¶ Sadr≈æaj -->
    <main class="container py-4 flex-grow-1">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="–ó–∞—Ç–≤–æ—Ä–∏"></button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    <!-- üîª Footer -->
    <footer class="text-center mt-5 py-4 text-muted">
        <small>¬© 2025 –ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª—Ü–∏ |
            <a href="{{ url_for('main.terms') }}">–£—Å–ª–æ–≤–∏ –∫–æ—Ä–∏—à—õ–µ—ö–∞</a> |
            <a href="{{ url_for('main.privacy_policy') }}">–ü–æ–ª–∏—Ç–∏–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏</a>
        </small>
    </footer>

    <!-- üß© Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- üåó Light/Dark Toggle Script -->
    <script>
      const toggle = document.getElementById('modeToggle');
      const label = document.getElementById('modeLabel');

      const saved = localStorage.getItem('mode') || 'light';
      document.body.classList.add(`${saved}-mode`);
      toggle.checked = saved === 'dark';
      label.textContent = saved === 'dark' ? 'üåô –¢–∞–º–Ω–∏ —Ä–µ–∂–∏–º' : 'üåû –°–≤–µ—Ç–ª–∏ —Ä–µ–∂–∏–º';

      toggle.addEventListener('change', () => {
        document.body.classList.toggle('dark-mode');
        document.body.classList.toggle('light-mode');
        const currentMode = document.body.classList.contains('dark-mode') ? 'dark' : 'light';
        localStorage.setItem('mode', currentMode);
        label.textContent = currentMode === 'dark' ? 'üåô –¢–∞–º–Ω–∏ —Ä–µ–∂–∏–º' : 'üåû –°–≤–µ—Ç–ª–∏ —Ä–µ–∂–∏–º';
      });
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>
